<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Docsify Site</title>

    <!-- Include Docsify -->
    <script src="//cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js"></script>

    <!-- Include Featherlight -->
    <link href="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.min.css" type="text/css" rel="stylesheet" />
    <script src="https://cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

    <!-- Include your custom Docsify plugin -->
    <script>
      window.$docsify.plugins = [].concat(installImagePopup, window.$docsify.plugins);

      function installImagePopup(hook, vm) {
        hook.doneEach(function() {
          var allImages = Array.prototype.slice.call(document.querySelectorAll('.markdown-section img'));
          var allLinks = Array.prototype.slice.call(document.querySelectorAll('.markdown-section a'));

          allImages.forEach(function(img) {
            img.style.cursor = 'zoom-in';

            img.addEventListener('click', function() {
              $.featherlight('<img src="' + img.src + '">', {
                closeIcon: '',
                type: 'html'
              });
            });
          });

          allLinks.forEach(function(link) {
            var href = link.getAttribute('href');

            if (href.startsWith('http') && (href.endsWith('.png') || href.endsWith('.jpg') || href.endsWith('.jpeg') || href.endsWith('.gif'))) {
              link.addEventListener('click', function(e) {
                e.preventDefault();
                $.featherlight('<img src="' + href + '">', {
                  closeIcon: '',
                  type: 'html'
                });
              });
            }
          });
        });
      }
    </script>
</head>
<body>
    <div id="app"></div>
</body>
</html>
